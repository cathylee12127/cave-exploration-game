# 如何显示二维码

## 问题
游戏页面上的二维码没有显示。

## 解决方案

我创建了一个专门的二维码显示页面,可以完美显示二维码供扫描。

### 方法 1: 访问二维码显示页面 (推荐)

1. **确保前端服务器正在运行**:
   ```bash
   cd cave-exploration-game/frontend
   npm run dev -- --host
   ```

2. **获取局域网地址**:
   ```bash
   cd cave-exploration-game
   node enable-mobile-access.js
   ```
   
   会显示类似:
   ```
   🌐 游戏地址: http://192.168.3.170:5174
   ```

3. **在浏览器中访问二维码页面**:
   ```
   http://192.168.3.170:5174/qrcode-display.html
   ```
   (使用你自己的IP地址)

4. **页面会显示**:
   - ✅ 大大的二维码(300x300像素)
   - ✅ 游戏访问地址
   - ✅ 使用说明
   - ✅ 下载按钮
   - ✅ 重新生成按钮

5. **扫描二维码**:
   - 用手机扫描屏幕上的二维码
   - 或者点击"下载二维码"保存图片
   - 或者打印页面

### 方法 2: 直接打开HTML文件

1. **在文件管理器中找到**:
   ```
   cave-exploration-game/qrcode-display.html
   ```

2. **双击打开**:
   - 会在浏览器中打开
   - 但可能显示localhost警告

3. **如果显示警告**:
   - 按照页面提示使用局域网IP访问

### 方法 3: 使用生成的二维码图片

1. **生成二维码图片**:
   ```bash
   cd cave-exploration-game
   node generate-qrcode.js
   ```

2. **打开图片**:
   ```
   cave-exploration-game/game-qrcode.png
   ```

3. **扫描或打印**

## 为什么游戏页面的二维码不显示?

### 原因
游戏登录页面的二维码组件检测到你使用的是 localhost 地址,所以显示了提示信息而不是二维码。

### 解决方法
使用局域网IP地址访问游戏,而不是localhost:

**错误的访问方式**:
```
http://localhost:5174  ❌
http://127.0.0.1:5174  ❌
```

**正确的访问方式**:
```
http://192.168.3.170:5174  ✅
```

## 完整流程

### 步骤 1: 启动服务器
```bash
# 终端 1 - 后端
cd cave-exploration-game/backend
npm start

# 终端 2 - 前端 (使用 --host 参数)
cd cave-exploration-game/frontend
npm run dev -- --host
```

### 步骤 2: 获取IP地址
```bash
# 终端 3
cd cave-exploration-game
node enable-mobile-access.js
```

输出示例:
```
🌐 游戏地址: http://192.168.3.170:5174
```

### 步骤 3: 访问二维码页面
在浏览器中打开:
```
http://192.168.3.170:5174/qrcode-display.html
```

### 步骤 4: 扫描二维码
- 页面会显示一个大大的二维码
- 用手机扫描即可

## 二维码页面功能

### 显示内容
- 📱 300x300像素的大二维码
- 🔗 游戏访问地址
- 📖 使用说明
- 💡 温馨提示

### 功能按钮
- 💾 下载二维码 - 保存为PNG图片
- 🔄 重新生成 - 刷新二维码

### 自动检测
- 如果使用localhost访问,会显示警告
- 提示用户使用局域网IP地址

## 使用场景

### 1. 展示/演示
- 在电脑上打开二维码页面
- 投影到大屏幕
- 观众扫码参与

### 2. 打印
- 点击"下载二维码"
- 打印下载的图片
- 贴在展示区域

### 3. 分享
- 截图二维码页面
- 发送给其他人
- 接收者扫码访问

## 常见问题

### Q: 二维码页面显示"当前使用localhost访问"
**A**: 使用局域网IP地址访问,不要使用localhost。

### Q: 二维码生成失败
**A**: 可能的原因:
1. 网络连接问题 - 检查网络
2. QR Server API不可用 - 稍后重试
3. 浏览器安全策略 - 尝试其他浏览器

### Q: 扫码后无法访问
**A**: 检查:
1. 手机和电脑是否在同一WiFi
2. 前端和后端服务器是否运行
3. 防火墙是否允许端口5174和3000

## 总结

现在有三种方式显示二维码:

1. ✅ **二维码显示页面** (推荐)
   - 访问: `http://[IP]:5174/qrcode-display.html`
   - 功能最完整,体验最好

2. ✅ **生成二维码图片**
   - 运行: `node generate-qrcode.js`
   - 打开: `game-qrcode.png`

3. ✅ **游戏登录页面**
   - 使用局域网IP访问游戏
   - 登录页面右侧会显示二维码

选择最适合你的方式即可! 🎉
