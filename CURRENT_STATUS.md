# å½“å‰çŠ¶æ€æ€»ç»“

## âœ… å·²å®Œæˆ

1. **æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ**
   - æ•°æ®åº“æ–‡ä»¶ï¼š`backend/database/cave-game.db`
   - è¡¨ç»“æ„ï¼šusers, questions, options, answers
   - é¢˜ç›®æ•°æ®ï¼š12 é“é¢˜ï¼ˆ6é“åŸºç¡€é¢˜ + 6é“æå‡é¢˜ï¼‰

2. **åç«¯æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ**
   - æœåŠ¡å™¨è¿è¡Œåœ¨ï¼š`http://localhost:3000`
   - å¥åº·æ£€æŸ¥æ¥å£æ­£å¸¸ï¼š`/health`

3. **å‰ç«¯æœåŠ¡å™¨è¿è¡Œæ­£å¸¸**
   - å‰ç«¯è¿è¡Œåœ¨ï¼š`http://localhost:5173`

## âŒ å½“å‰é—®é¢˜

**é¢˜ç›®æ¥å£è¿”å›é”™è¯¯**ï¼š`database.query is not a function`

### é—®é¢˜åŸå› 

è·¯ç”±æ–‡ä»¶ï¼ˆ`questions.js`, `users.js`, `scores.js`ï¼‰ä½¿ç”¨åŒæ­¥çš„ `database.query()` æ–¹æ³•ï¼Œä½† `db.js` å¯¼å‡ºçš„æ˜¯å¼‚æ­¥çš„ sqlite åº“æ¥å£ï¼ˆ`getDb()`, `initDb()`ï¼‰ã€‚

### é—®é¢˜ä½ç½®

- `backend/src/routes/questions.js` - ç¬¬ 35 è¡Œ
- `backend/src/routes/users.js` - ä½¿ç”¨ database.query
- `backend/src/routes/scores.js` - ä½¿ç”¨ database.query

### éœ€è¦ä¿®æ”¹

æ‰€æœ‰è·¯ç”±æ–‡ä»¶éœ€è¦æ”¹ä¸ºä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼š

**å½“å‰ä»£ç ï¼ˆåŒæ­¥ï¼‰**ï¼š
```javascript
const questions = database.query(`SELECT * FROM questions`);
```

**éœ€è¦æ”¹ä¸ºï¼ˆå¼‚æ­¥ï¼‰**ï¼š
```javascript
const db = await getDb();
const questions = await db.all(`SELECT * FROM questions`);
```

## ğŸ”§ å¿«é€Ÿä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šä¿®æ”¹æ‰€æœ‰è·¯ç”±æ–‡ä»¶ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼ˆæ¨èï¼‰

éœ€è¦ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼š
1. `backend/src/routes/questions.js`
2. `backend/src/routes/users.js`
3. `backend/src/routes/scores.js`

å°†æ‰€æœ‰è·¯ç”±å¤„ç†å‡½æ•°æ”¹ä¸º async/await æ–¹å¼ã€‚

### æ–¹æ¡ˆ 2ï¼šåˆ›å»ºåŒæ­¥æ•°æ®åº“åŒ…è£…å™¨

åœ¨ `db.js` ä¸­æ·»åŠ åŒæ­¥æ–¹æ³•åŒ…è£…å™¨ï¼Œä½†è¿™ä¸æ˜¯æœ€ä½³å®è·µã€‚

## ğŸ“ ä¸‹ä¸€æ­¥æ“ä½œ

1. **åœæ­¢åç«¯æœåŠ¡å™¨**
   ```bash
   # åœ¨è¿è¡Œåç«¯çš„ç»ˆç«¯æŒ‰ Ctrl+C
   ```

2. **ä¿®å¤è·¯ç”±æ–‡ä»¶**
   - å°†æ‰€æœ‰è·¯ç”±å¤„ç†å‡½æ•°æ”¹ä¸º async
   - ä½¿ç”¨ `await getDb()` è·å–æ•°æ®åº“è¿æ¥
   - ä½¿ç”¨ `await db.all()` æˆ– `await db.get()` æŸ¥è¯¢æ•°æ®

3. **é‡å¯åç«¯æœåŠ¡å™¨**
   ```bash
   cd backend
   npm start
   ```

4. **æµ‹è¯• API**
   ```bash
   # è®¿é—® http://localhost:3000/api/questions
   # åº”è¯¥è¿”å›é¢˜ç›®åˆ—è¡¨
   ```

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤åï¼Œè®¿é—® `http://localhost:5173` åº”è¯¥çœ‹åˆ°ï¼š
- âœ… "æ­£åœ¨åŠ è½½æ¸¸æˆ..." åŠ è½½æŒ‡ç¤ºå™¨
- âœ… "æ­£åœ¨åŠ è½½é¢˜ç›®..." æç¤º
- âœ… "æ¸¸æˆåŠ è½½å®Œæˆï¼" ç»¿è‰²æç¤º
- âœ… ç™»å½•å¼¹çª—ï¼ˆå·¦ä¾§å§“åè¾“å…¥ï¼Œå³ä¾§äºŒç»´ç ï¼‰

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `QUICK_START_GUIDE.md` - å®Œæ•´å¯åŠ¨æŒ‡å—
- `GAME_INITIALIZATION_FIX.md` - åˆå§‹åŒ–é—®é¢˜ä¿®å¤è¯´æ˜
- `verify-setup.js` - ç¯å¢ƒéªŒè¯è„šæœ¬

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœéœ€è¦æˆ‘å¸®ä½ ä¿®å¤è·¯ç”±æ–‡ä»¶ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šç«‹å³ä¿®æ”¹æ‰€æœ‰è·¯ç”±æ–‡ä»¶ä½¿ç”¨å¼‚æ­¥æ–¹å¼ã€‚
